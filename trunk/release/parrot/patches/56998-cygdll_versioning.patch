difforig config/init/hints/cygwin.pm

diff -u config/init/hints/cygwin.pm.orig config/init/hints/cygwin.pm
--- config/init/hints/cygwin.pm.orig	2008-06-02 17:35:05.000000000 +0000
+++ config/init/hints/cygwin.pm	2008-07-16 19:18:59.515625000 +0000
@@ -13,18 +13,30 @@
     # in the standard installation, so we get rid of it
     my $libs = $conf->data->get('libs');
     $libs =~ s/-lutil\b//g;
+    # same for -lm and -dl
+    $libs =~ s/-lm\b//g;
+    $libs =~ s/-ldl\b//g;
 
     my $build_dir = $conf->data->get('build_dir');
     $build_dir =~ s/ /\\ /g;
+    my $libparrot_shared = $conf->data->get('libparrot_shared');
+    # force cyg prefix
+    $libparrot_shared =~ s/^lib/cyg/g;
+    # force the dll versioning
+    my @parrot_version = Parrot::BuildUtil::parrot_version();
+    my $dllsuffix = join("_",@parrot_version);
+    $libparrot_shared =~ s/parrot\.dll/parrot$dllsuffix\.dll/;
 
-    # A note about building shared libraries:  Perl5 uses the 'ld2' tool, which
-    # is installed as part of the perl5 installation.  So far, it appears
-    # parrot can get by with simply using gcc -shared, so we override the
-    # perl5 Configure defaults and use 'gcc -shared' instead of 'ld2'.
+    # An old note about building shared libraries: Perl5.8 used the
+    # 'ld2' tool, which is installed as part of the perl5 installation.
+    # So far, it appears parrot can get by with simply using gcc -shared,
+    # so we override the perl5 Configure defaults and use 'gcc -shared'
+    # instead of 'ld2'.
     # If this later causes problems, it might be worth revisiting.
     # A. Dougherty 9/9/2002
     $conf->data->set(
         build_dir           => $build_dir,
+        libparrot_shared    => $libparrot_shared,
         ld                  => 'gcc',
         ld_share_flags      => '-shared',
         ld_load_flags       => '-shared',
